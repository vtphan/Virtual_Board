<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="/static/css/sample.css">

</head>

<body>
	<script>
		var cn = "{{.course}}"
		console.log("print course");
		var course = JSON.parse(cn);
		var cnDate = UtcToIst(course.created_at).toLocaleDateString();

		document.write('<div class="container">');
		document.write('<h2>' + course.coursename + '(' + cnDate + ')' + '</h2 > ');
		document.write('<li class="table-header">')
		document.write('<div class="col col-1">Notebook name</div>')
		document.write('<div class="col col-2">Created time</div>');
		document.write('</li>');
		function timeSince(date) {

			var seconds = Math.floor((new Date() - date) / 1000);

			var interval = Math.floor(seconds / 31536000);

			if (interval > 1) {
				return interval + " years";
			}
			interval = Math.floor(seconds / 2592000);
			if (interval > 1) {
				return interval + " months";
			}
			interval = Math.floor(seconds / 86400);
			if (interval > 1) {
				return interval + " days";
			}
			interval = Math.floor(seconds / 3600);
			if (interval > 1) {
				return interval + " hours";
			}
			interval = Math.floor(seconds / 60);
			if (interval > 1) {
				return interval + " minutes";
			}
			return Math.floor(seconds) + " seconds";
		}
		function UtcToIst(data) {
			var dt = new Date(data);
			return dt;
		}

		var notebooks = ("{{.notebooks}}").split("&")
		console.log(notebooks);
		for (var i = 0; i < notebooks.length; i++) {
			console.log(notebooks[i]);
			notebook = JSON.parse(notebooks[i]);


			var updDate = UtcToIst(notebook.updated_at).toLocaleDateString();

			document.write('<li class="table-row">')
			document.write('<div class="col col-2"><a href={{.baseUrl }}' + notebook.notebookname + '>' + notebook.notebookname + '</a>' + '<span class="subtext">' + "Updated" + " " + timeSince(new Date(notebook.updated_at)) + " " + "ago" + '</span>' + '</div>' + '<div class="col col-2">' + updDate + '</div> ');


		}
		document.write('</li >');

		document.write('</div >');


	</script>
</body>

</html>